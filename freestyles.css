@import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@400&display=swap');

/* ===== Theme ===== */
:root{
  --black:#000; --white:#fff;
  --bg:#1c1c1c;
  --orange:#d35400; --orange-d:#c25227; --orange-dim:#a84300;
  --gray-1:#ddd; --gray-2:#808080; --gray-3:#53525d;
}

/* ===== Global ===== */
*{ box-sizing:border-box; }
html, body { font-family:'Ubuntu',sans-serif; font-weight:400; }
*, *::before, *::after { font-family:inherit; }
input, button, select, textarea { font:inherit; }
input::placeholder, textarea::placeholder { font-family:inherit; }

body{ margin:0; background:var(--bg); color:var(--white); }
.container{ width:90%; max-width:1000px; margin:20px auto; text-align:center; }

/* iOS interaction guards */
.bar{
  touch-action:none;
  -webkit-user-select:none; user-select:none;
  -webkit-tap-highlight-color:transparent;
  overscroll-behavior:contain;
}
.tempo-slider{
  touch-action:manipulation;
  -webkit-tap-highlight-color:transparent;
}
.bar__fill{ pointer-events:none; }
#tempoLabel, .tempo-control label{ pointer-events:none; }

/* ===== Sheet music ===== */
.sheet-music{ margin:40px 0; }
.sheet-music img{ max-width:100%; height:auto; border:2px solid var(--black); }

/* ===== Inputs ===== */
.selector{
  width:10rem; max-width:100%;
  padding:5px 8px; font-size:.9rem;
  border:2px solid var(--black); border-radius:5px; text-align:left; color:var(--white);
  background:var(--orange);
}
.selector::placeholder{ color:var(--white); opacity:1; }
.selector--orange{ background:var(--orange); }
.selector--orange:hover,.selector--orange:focus{ background:var(--orange-d); }

/* Desktop widths for triggers */
#exerciseSearch.selector,
#categorySearch.selector{ width:150px; }

/* ===== Buttons ===== */
.btn{
  height:40px; display:inline-flex; align-items:center; justify-content:center;
  border:2px solid var(--black); color:var(--white); font-size:1.2rem;
  padding:6px 12px; border-radius:5px; cursor:pointer; margin:0;
  touch-action:manipulation; -webkit-user-select:none; user-select:none; -webkit-tap-highlight-color:transparent;
}
.btn--orange{ background:var(--orange); }
.btn--orange:hover{ background:var(--orange-d); }
.btn:disabled{
  background:var(--orange-dim);
  cursor:not-allowed;
  opacity:1; filter:brightness(.85) saturate(.95);
}
.btn-square{ width:45px; } /* plus/minus & picker close */

/* ===== Layout ===== */
.control-container{
  display:flex; justify-content:center; align-items:center;
  gap:20px; margin:40px auto; flex-wrap:wrap; width:100%;
}
.exercise-group{
  display:flex; align-items:center; justify-content:center;
  gap:20px;
}
.exercise-container, .category-container{ position:relative; }

/* ===== Tempo column ===== */
.tempo-control{
  width:75%; max-width:600px; margin:40px auto;
  display:flex; flex-direction:column; align-items:center; gap:8px;
}
.tempo-control label{ margin:0; color:var(--white); width:100%; text-align:center; }

/* Tempo slider visuals */
.tempo-slider{
  -webkit-appearance:none; appearance:none;
  width:100%; max-width:100%; height:12px; border-radius:5px;
  margin:0 auto; box-shadow:inset 0 0 0 2px var(--black);
  background:var(--gray-1); cursor:pointer;
}
.tempo-slider::-webkit-slider-thumb{
  -webkit-appearance:none; appearance:none;
  width:20px; height:20px; background:var(--white);
  border-radius:50%; border:2px solid var(--black); cursor:pointer;
}
.tempo-slider::-moz-range-thumb{
  width:20px; height:20px; background:var(--white);
  border-radius:50%; border:2px solid var(--black); cursor:pointer;
}
.tempo-slider::-webkit-slider-runnable-track,
.tempo-slider::-moz-range-track{
  background:transparent; border:none;
}
/* Disabled visuals (if ever used) */
input[type="range"]:disabled{ opacity:1; }
input[type="range"]:disabled::-webkit-slider-runnable-track{ background:#c7b8c5; }
input[type="range"]:disabled::-webkit-slider-thumb{ background:#9b9b9b; }

/* ===== Progress bar ===== */
.progress-container{ width:75%; max-width:600px; margin:40px auto; }
.bar{
  position:relative; height:40px; background:var(--white);
  border:2px solid var(--black); overflow:hidden; margin:0 auto;
}
.bar__fill{
  width:100%; height:100%; background:var(--orange);
  transform-origin:left center; transform:scaleX(0); will-change:transform;
}
.time-overlay{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  font-size:1rem; color:var(--black); pointer-events:none;
}

/* ===== Menus (dropdowns) ===== */
.menu{
  position:absolute; top:calc(100% - 5px); left:0; transform:none;
  border:1px solid var(--gray-2); border-radius:3px;
  list-style:none; margin:0; padding:3px; white-space:nowrap; display:none; z-index:999;
  max-height:50vh; overflow-y:auto; min-width:100%; text-align:left;
}
.menu--orange{ background:var(--orange); }
.menu li{ padding:5px 8px; cursor:pointer; color:var(--white); font-size:.9rem; text-align:left; }
.menu li:hover{ background:var(--gray-3); }

/* Active items: always white bg + orange text, unaffected by hover; 5px radius */
.menu li.active-option,
.picker__list li.active-option{
  background:#fff !important;
  color:var(--orange) !important;
  border-radius:5px !important;
}
.menu li.active-option:hover,
.picker__list li.active-option:hover,
.menu li.active-option:focus-visible,
.picker__list li.active-option:focus-visible{
  background:#fff !important;
  color:var(--orange) !important;
}

/* ===== Centered picker dialog (transparent wrapper; separate header & list) ===== */
.picker-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; z-index:9999;
  backdrop-filter:blur(4px);
}
.picker-overlay[data-open="1"]{ display:block; }

/* Transparent parent: no bg, no shadow — just centers the two boxes */
.picker{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  width:min(92vw, 520px); max-height:min(80vh, 600px);
  display:flex; flex-direction:column; gap:12px;          /* vertical gap = 12px */
  background:transparent; border:none; padding:0; overflow:visible;
}

/* Header: no padding/bg/shadow; children align to equal height */
.picker__header{
  display:flex; align-items:stretch; gap:12px;
  padding:0; background:transparent; border:none; box-shadow:none;
  animation:pop .12s ease-out;
}

/* Close button: 45x40, 2px border */
.picker__header .btn-square{
  flex:0 0 45px; height:40px;
  border-width:2px;
}

/* Search input: same 40px height, grows wide, 2px border */
.picker__header .selector{
  flex:1; width:auto; height:40px;
  border-width:2px; border-radius:5px;
}

/* List: 2px border, rounded, scrollable */
.picker__list{
  position:static !important; display:block !important; max-height:none !important;
  flex:1; overflow:auto; -webkit-overflow-scrolling:touch;
  background:var(--orange); border:2px solid var(--black); border-radius:5px;
  animation:pop .12s ease-out;
}

/* List items: requested padding, no separators; hover only when not active */
.picker__list li{
  padding:5px 8px; cursor:pointer; min-height:44px; display:flex; align-items:center;
  transition:background .12s ease, transform .06s ease;
}
.picker__list li:not(.active-option):hover{ background:rgba(0,0,0,.08); }
.picker__list li:active{ transform:scale(.995); }

/* Entrance animation */
@keyframes pop{
  from{ transform:translateY(4px); opacity:.0; }
  to{ transform:none; opacity:1; }
}

/* ===== Scrollbar (optional) ===== */
::-webkit-scrollbar{ width:8px; height:8px; }
::-webkit-scrollbar-track{ background:#2c2c2c; }
::-webkit-scrollbar-thumb{ background:var(--orange); border-radius:4px; }
::-webkit-scrollbar-thumb:hover{ background:#e67e22; }

/* ===== Mobile (≤600px) ===== */
@media (max-width:600px){
  body{ font-size:.95rem; }

  .control-container{
    flex-direction:column;
    align-items:stretch;
    gap:20px;
    margin:40px auto;
  }

  .exercise-group{
    width:100%;
    display:grid;
    grid-template-columns:40px minmax(0,1fr) 40px;
    gap:20px;
    align-items:center;
  }
  .btn-square{ width:40px; height:40px; } /* match +/- and picker close on phones */

  .exercise-container{ min-width:0; }
  #exerciseSearch.selector,
  #categorySearch.selector{ width:100% !important; min-width:0; }

  .selector{ width:100%; height:40px; }
  .btn{ width:100%; height:40px; }

  .tempo-control{ width:100%; max-width:600px; margin:40px auto; }
  .progress-container{ width:100%; margin:40px auto; }

  .menu{ top:calc(100% - 10px); width:100%; left:0; transform:none; }
}

/* --- Typography guard (keep at end) --- */
.container .tempo-control label,
.container #tempoLabel{
  font-weight:400 !important;
  font-style:normal !important;
  text-transform:none !important;
  letter-spacing:normal !important;
  font-family:'Ubuntu',sans-serif !important;
}
