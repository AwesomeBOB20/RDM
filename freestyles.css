@import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@400&display=swap');

/* ===== Theme ===== */
:root{
  --black:#000; --white:#fff;
  --bg:#1c1c1c;
  --orange:#d35400; --orange-d:#c25227; --orange-dim:#a84300;
  --gray-1:#ddd; --gray-2:#808080; --gray-3:#53525d;
  --control-h: 40px; /* button height & mobile control height */
}

/* ===== Global ===== */
*{ box-sizing:border-box; }
html, body { font-family:'Ubuntu',sans-serif; font-weight:400; }
*, *::before, *::after { font-family:inherit; }
input, button, select, textarea { font:inherit; }
input::placeholder, textarea::placeholder { font-family:inherit; }

body{ margin:0; background:var(--bg); color:var(--white); }
.container{ width:90%; max-width:1000px; margin:20px auto; text-align:center; }

/* iOS interaction guards */
.bar{
  touch-action:none;
  -webkit-user-select:none; user-select:none;
  -webkit-tap-highlight-color:transparent;
  overscroll-behavior:contain;
}
.tempo-slider{
  touch-action:manipulation;
  -webkit-tap-highlight-color:transparent;
}
.bar__fill{ pointer-events:none; }
#tempoLabel, .tempo-control label{ pointer-events:none; }

/* ===== Sheet music ===== */
.sheet-music{ margin:40px 0; }
.sheet-music img{ max-width:100%; height:auto; border:2px solid var(--black); }

/* ===== Inputs (selectors) ===== */
.selector{
  width:10rem; max-width:100%;
  padding:5px 8px; font-size:.9rem;
  border:2px solid var(--black); border-radius:5px; text-align:left; color:var(--white);
  background:var(--orange);
}
.selector::placeholder{ color:var(--white); opacity:1; }
.selector--orange{ background:var(--orange); }
.selector--orange:hover,.selector--orange:focus{ background:var(--orange-d); }

/* Desktop fixed widths for top selectors */
#categorySearch.selector,
#exerciseSearch.selector{ width:150px; }

/* ===== Buttons ===== */
.btn{
  height:var(--control-h);
  display:inline-flex; align-items:center; justify-content:center;
  border:2px solid var(--black); color:var(--white); font-size:1.2rem;
  padding:6px 12px; border-radius:5px; cursor:pointer; margin:0;
  touch-action:manipulation; -webkit-user-select:none; user-select:none; -webkit-tap-highlight-color:transparent;
}
.btn--orange{ background:var(--orange); }
.btn--orange:hover{ background:var(--orange-d); }
.btn:disabled{
  background:var(--orange-dim);
  cursor:not-allowed;
  opacity:1; filter:brightness(.85) saturate(.95);
}
.btn-square{ width:45px; }

/* ===== Layout ===== */
.control-container{
  display:flex; justify-content:center; align-items:center;
  gap:20px; margin:40px auto; flex-wrap:wrap; width:100%;
}

/* Category lives by itself (150px); Exercise group is a 3-col grid */
.category-container{ position:relative; }
.exercise-group{
  display:grid; grid-template-columns:45px 150px 45px;
  gap:20px; align-items:center; justify-content:center;
}
.exercise-container{ position:relative; }

/* ===== Tempo column ===== */
.tempo-control{
  width:75%; max-width:600px; margin:40px auto;
  display:flex; flex-direction:column; align-items:center; gap:8px;
}
.tempo-control label{ margin:0; color:var(--white); width:100%; text-align:center; }

/* Tempo slider visuals */
.tempo-slider{
  -webkit-appearance:none; appearance:none;
  width:100%; max-width:100%; height:12px; border-radius:5px;
  margin:0 auto; box-shadow:inset 0 0 0 2px var(--black);
  background:var(--gray-1); cursor:pointer;
}
.tempo-slider::-webkit-slider-thumb{
  -webkit-appearance:none; appearance:none;
  width:20px; height:20px; background:var(--white);
  border-radius:50%; border:2px solid var(--black); cursor:pointer;
}
.tempo-slider::-moz-range-thumb{
  width:20px; height:20px; background:var(--white);
  border-radius:50%; border:2px solid var(--black); cursor:pointer;
}
.tempo-slider::-webkit-slider-runnable-track,
.tempo-slider::-moz-range-track{ background:transparent; border:none; }
input[type="range"]:disabled{ opacity:1; }
input[type="range"]:disabled::-webkit-slider-runnable-track{ background:#c7b8c5; }
input[type="range"]:disabled::-webkit-slider-thumb{ background:#9b9b9b; }

/* ===== Progress bar ===== */
.progress-container{ width:75%; max-width:600px; margin:40px auto; }
.bar{
  position:relative; height:40px; background:var(--white);
  border:2px solid var(--black); overflow:hidden; margin:0 auto;
}
.bar__fill{
  width:100%; height:100%; background:var(--orange);
  transform-origin:left center; transform:scaleX(0); will-change:transform;
}
.time-overlay{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  font-size:1rem; color:var(--black); pointer-events:none;
}

/* ===== Kill legacy inline UL menus so they never affect spacing ===== */
.menu,
#exerciseList,
#categoryList{
  display:none !important;
  position:fixed !important; left:-9999px !important; top:auto !important;
  width:0 !important; height:0 !important;
  pointer-events:none !important; visibility:hidden !important; opacity:0 !important;
}

/* ===== Active item style for modal picker list ===== */
.picker__list li.active-option{
  background:#fff !important;
  color:var(--orange) !important;
  border-radius:5px !important;
}

/* ===== Modal Picker (kept) ===== */
.picker-overlay{
  position:fixed; inset:0; display:none;
  background:rgba(0,0,0,.35);
  backdrop-filter: blur(6px) saturate(120%);
  -webkit-backdrop-filter: blur(6px) saturate(120%);
  z-index:9999;
  animation: picker-fade-in .18s ease-out;
}
.picker-overlay[data-open="1"]{ display:block; }

.picker{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  width:min(520px, 92vw);
  max-height:82vh;
  display:flex; flex-direction:column; gap:10px;
  background:transparent; border:none; padding:0;
  animation: panel-pop .22s cubic-bezier(.2,.8,.2,1);
}

/* Orange header: title + close on row 1, search full width on row 2 */
.picker__header{
  display:grid;
  grid-template-columns:1fr 40px;
  grid-template-areas:
    "title close"
    "search search";
  align-items:center;
  gap:8px 10px;
  padding:8px;
  background:var(--orange);
  border:2px solid var(--black);
  border-radius:10px;
}
.picker__title{
  grid-area:title;
  margin:0;
  font-size:1.2rem;
  line-height:1.2;
  color:var(--white);
}
.picker__header .btn-square{
  grid-area:close;
  width:40px; height:40px;
  border-width:2px;
  border-radius:10px;
  background:var(--white); color:var(--black);
}
#pickerSearch.selector{
  grid-area:search;
  width:100%; height:var(--control-h); font-size:1rem;
  padding:6px 10px;
  background:#fff; color:#000;
  border:2px solid var(--black);
  border-radius:10px;
}

/* List panel */
.picker__list{
  list-style:none; margin:0; padding:6px;
  border:2px solid var(--black);
  border-radius:10px;
  overflow-y:auto;
  max-height:calc(82vh - 80px);
  box-shadow:0 8px 24px rgba(0,0,0,.45);
  background:var(--orange);
}
.picker__list li{
  padding:10px 12px;
  cursor:pointer;
  color:var(--white);
  border-radius:10px;
}
.picker__list li:hover{ background:var(--gray-3); }

/* add this near your picker styles */
#pickerSearch::placeholder{
  color:#555;     /* readable on white input */
  opacity:1;
}


/* Motion */
@keyframes picker-fade-in{ from{opacity:0} to{opacity:1} }
@keyframes panel-pop{ from{opacity:0; transform:translate(-50%,-44%) scale(.98)} to{opacity:1; transform:translate(-50%,-50%) scale(1)} }
@media (prefers-reduced-motion: reduce){
  .picker-overlay, .picker{ animation:none !important; }
}

/* ===== Mobile (â‰¤600px) ===== */
@media (max-width:600px){
  body{ font-size:.95rem; }

  /* Stack: Category row, then Exercise group row */
  .control-container{
    display:grid;
    grid-template-columns:1fr;
    row-gap:20px;
    justify-items:stretch;
  }

  /* Exercise row = Prev | Exercise | Next */
  .exercise-group{
    grid-template-columns:40px 1fr 40px;
    gap:20px;
  }

  /* Force all four to 40px tall and full width in their cells */
  #categorySearch.selector,
  #exerciseSearch.selector,
  #prevExerciseBtn,
  #nextExerciseBtn{
    height:var(--control-h);
    width:100%;
  }

  .btn-square{ width:40px; height:var(--control-h); }

  .tempo-control{ width:100%; max-width:600px; margin:40px auto; }
  .progress-container{ width:100%; margin:40px auto; }
}

/* --- Typography guard (keep at end) --- */
.container .tempo-control label,
.container #tempoLabel{
  font-weight:400 !important;
  font-style:normal !important;
  text-transform:none !important;
  letter-spacing:normal !important;
  font-family:'Ubuntu',sans-serif !important;
}
